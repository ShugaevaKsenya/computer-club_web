{"ast":null,"code":"// services/Api.js\nconst API_BASE_URL = 'http://127.0.0.1:8000/api';\nclass ApiService {\n  constructor() {\n    this.baseURL = API_BASE_URL;\n  }\n  async request(endpoint, options = {}) {\n    const url = `${this.baseURL}${endpoint}`;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      credentials: 'include',\n      ...options\n    };\n    if (options.body && config.method !== 'GET') {\n      config.body = JSON.stringify(options.body);\n    }\n    try {\n      console.log(`API Request: ${config.method || 'GET'} ${url}`, options.body || '');\n      const response = await fetch(url, config);\n      if (!response.ok) {\n        // Получаем детальную информацию об ошибке от сервера\n        let errorMessage = `HTTP error! status: ${response.status}`;\n        let errorDetails = null;\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorData.error || JSON.stringify(errorData);\n          errorDetails = errorData.errors || errorData.details || null;\n        } catch (e) {\n          // Если не удалось распарсить JSON, используем стандартное сообщение\n        }\n        const error = new Error(errorMessage);\n        error.status = response.status;\n        error.details = errorDetails;\n        throw error;\n      }\n\n      // Для DELETE запросов может не быть тела ответа\n      if (response.status === 204 || config.method === 'DELETE') {\n        return {\n          success: true\n        };\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('API request failed:', error);\n      throw error;\n    }\n  }\n  // Users API\n  async getUsers() {\n    return this.request('/users');\n  }\n  async createUser(userData) {\n    return this.request('/users', {\n      method: 'POST',\n      body: userData\n    });\n  }\n\n  // Computers API\n  async getComputers() {\n    return this.request('/computers');\n  }\n  async getComputer(id) {\n    return this.request(`/computers/${id}`);\n  }\n  async getComputerWithDetails(id) {\n    return this.request(`/computers/${id}?with=specs,position`);\n  }\n  async deleteComputer(id) {\n    return this.request(`/computers/${id}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // Computer Specs API - ИСПРАВЛЕННАЯ ОШИБКА!\n  async getComputerSpecs() {\n    return this.request('/computer-specs'); // Убрал лишний 'api/'\n  }\n  async getComputerSpec(id) {\n    return this.request(`/computer-specs/${id}`);\n  }\n  async deleteComputerSpec(id) {\n    return this.request(`/computer-specs/${id}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // Computer Positions API\n  async getComputerPositions() {\n    return this.request('/computer-positions');\n  }\n  async getComputerPosition(id) {\n    return this.request(`/computer-positions/${id}`);\n  }\n  async deleteComputerPosition(id) {\n    return this.request(`/computer-positions/${id}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // Bookings API\n  async getBookings() {\n    return this.request('/bookings');\n  }\n  async createBooking(bookingData) {\n    return this.request('/bookings', {\n      method: 'POST',\n      body: bookingData\n    });\n  }\n  async getBooking(id) {\n    return this.request(`/bookings/${id}`);\n  }\n\n  // Foods API\n  async getFoods() {\n    return this.request('/foods');\n  }\n  async getFood(id) {\n    return this.request(`/foods/${id}`);\n  }\n  async deleteFood(id) {\n    return this.request(`/foods/${id}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // Additional Menu API\n  async addFoodToBooking(bookingId, foodData) {\n    return this.request('/additional-menu', {\n      method: 'POST',\n      body: {\n        booking_id: bookingId,\n        ...foodData\n      }\n    });\n  }\n\n  // Payments API\n  async createPayment(paymentData) {\n    return this.request('/payments', {\n      method: 'POST',\n      body: paymentData\n    });\n  }\n  async getPayment(id) {\n    return this.request(`/payments/${id}`);\n  }\n\n  // Tariffs API\n  async getTariffs() {\n    return this.request('/tariffs');\n  }\n  async getTariff(id) {\n    return this.request(`/tariffs/${id}`);\n  }\n\n  // Codes API\n  async validateCode(code) {\n    return this.request('/codes/validate', {\n      method: 'POST',\n      body: {\n        code\n      }\n    });\n  }\n\n  // Clubs API\n  async getClubs() {\n    return this.request('/clubs');\n  }\n  async getClub(id) {\n    return this.request(`/clubs/${id}`);\n  }\n\n  // Комплексные запросы\n  async getAvailableComputers(date, timeFrom, timeTo) {\n    return this.request(`/computers/available?date=${date}&time_from=${timeFrom}&time_to=${timeTo}`);\n  }\n  async getUserBookings(userId) {\n    return this.request(`/users/${userId}/bookings`);\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","constructor","baseURL","request","endpoint","options","url","config","headers","credentials","body","method","JSON","stringify","console","log","response","fetch","ok","errorMessage","status","errorDetails","errorData","json","message","error","errors","details","e","Error","success","getUsers","createUser","userData","getComputers","getComputer","id","getComputerWithDetails","deleteComputer","getComputerSpecs","getComputerSpec","deleteComputerSpec","getComputerPositions","getComputerPosition","deleteComputerPosition","getBookings","createBooking","bookingData","getBooking","getFoods","getFood","deleteFood","addFoodToBooking","bookingId","foodData","booking_id","createPayment","paymentData","getPayment","getTariffs","getTariff","validateCode","code","getClubs","getClub","getAvailableComputers","date","timeFrom","timeTo","getUserBookings","userId","apiService"],"sources":["C:/Users/Ksenia/Desktop/комп_клуб/gaming-club-react/src/services/Api.js"],"sourcesContent":["// services/Api.js\r\nconst API_BASE_URL = 'http://127.0.0.1:8000/api';\r\n\r\nclass ApiService {\r\n    constructor() {\r\n        this.baseURL = API_BASE_URL;\r\n    }\r\n\r\n    async request(endpoint, options = {}) {\r\n        const url = `${this.baseURL}${endpoint}`;\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n            },\r\n            credentials: 'include',\r\n            ...options,\r\n        };\r\n\r\n        if (options.body && config.method !== 'GET') {\r\n            config.body = JSON.stringify(options.body);\r\n        }\r\n\r\n        try {\r\n            console.log(`API Request: ${config.method || 'GET'} ${url}`, options.body || '');\r\n            const response = await fetch(url, config);\r\n            \r\n            if (!response.ok) {\r\n                // Получаем детальную информацию об ошибке от сервера\r\n                let errorMessage = `HTTP error! status: ${response.status}`;\r\n                let errorDetails = null;\r\n                \r\n                try {\r\n                    const errorData = await response.json();\r\n                    errorMessage = errorData.message || errorData.error || JSON.stringify(errorData);\r\n                    errorDetails = errorData.errors || errorData.details || null;\r\n                } catch (e) {\r\n                    // Если не удалось распарсить JSON, используем стандартное сообщение\r\n                }\r\n                \r\n                const error = new Error(errorMessage);\r\n                error.status = response.status;\r\n                error.details = errorDetails;\r\n                throw error;\r\n            }\r\n\r\n            // Для DELETE запросов может не быть тела ответа\r\n            if (response.status === 204 || config.method === 'DELETE') {\r\n                return { success: true };\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('API request failed:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    // Users API\r\n    async getUsers() {\r\n        return this.request('/users');\r\n    }\r\n\r\n    async createUser(userData) {\r\n        return this.request('/users', {\r\n            method: 'POST',\r\n            body: userData\r\n        });\r\n    }\r\n\r\n    // Computers API\r\n    async getComputers() {\r\n        return this.request('/computers');\r\n    }\r\n\r\n    async getComputer(id) {\r\n        return this.request(`/computers/${id}`);\r\n    }\r\n\r\n    async getComputerWithDetails(id) {\r\n        return this.request(`/computers/${id}?with=specs,position`);\r\n    }\r\n\r\n    async deleteComputer(id) {\r\n        return this.request(`/computers/${id}`, { method: 'DELETE' });\r\n    }\r\n\r\n    // Computer Specs API - ИСПРАВЛЕННАЯ ОШИБКА!\r\n    async getComputerSpecs() {\r\n        return this.request('/computer-specs'); // Убрал лишний 'api/'\r\n    }\r\n\r\n    async getComputerSpec(id) {\r\n        return this.request(`/computer-specs/${id}`);\r\n    }\r\n\r\n    async deleteComputerSpec(id) {\r\n        return this.request(`/computer-specs/${id}`, { method: 'DELETE' });\r\n    }\r\n\r\n    // Computer Positions API\r\n    async getComputerPositions() {\r\n        return this.request('/computer-positions');\r\n    }\r\n\r\n    async getComputerPosition(id) {\r\n        return this.request(`/computer-positions/${id}`);\r\n    }\r\n\r\n    async deleteComputerPosition(id) {\r\n        return this.request(`/computer-positions/${id}`, { method: 'DELETE' });\r\n    }\r\n\r\n    // Bookings API\r\n    async getBookings() {\r\n        return this.request('/bookings');\r\n    }\r\n\r\n    async createBooking(bookingData) {\r\n        return this.request('/bookings', {\r\n            method: 'POST',\r\n            body: bookingData\r\n        });\r\n    }\r\n\r\n    async getBooking(id) {\r\n        return this.request(`/bookings/${id}`);\r\n    }\r\n\r\n    // Foods API\r\n    async getFoods() {\r\n        return this.request('/foods');\r\n    }\r\n\r\n    async getFood(id) {\r\n        return this.request(`/foods/${id}`);\r\n    }\r\n\r\n    async deleteFood(id) {\r\n        return this.request(`/foods/${id}`, { method: 'DELETE' });\r\n    }\r\n\r\n    // Additional Menu API\r\n    async addFoodToBooking(bookingId, foodData) {\r\n        return this.request('/additional-menu', {\r\n            method: 'POST',\r\n            body: {\r\n                booking_id: bookingId,\r\n                ...foodData\r\n            }\r\n        });\r\n    }\r\n\r\n    // Payments API\r\n    async createPayment(paymentData) {\r\n        return this.request('/payments', {\r\n            method: 'POST',\r\n            body: paymentData\r\n        });\r\n    }\r\n\r\n    async getPayment(id) {\r\n        return this.request(`/payments/${id}`);\r\n    }\r\n\r\n    // Tariffs API\r\n    async getTariffs() {\r\n        return this.request('/tariffs');\r\n    }\r\n\r\n    async getTariff(id) {\r\n        return this.request(`/tariffs/${id}`);\r\n    }\r\n\r\n    // Codes API\r\n    async validateCode(code) {\r\n        return this.request('/codes/validate', {\r\n            method: 'POST',\r\n            body: { code }\r\n        });\r\n    }\r\n\r\n    // Clubs API\r\n    async getClubs() {\r\n        return this.request('/clubs');\r\n    }\r\n\r\n    async getClub(id) {\r\n        return this.request(`/clubs/${id}`);\r\n    }\r\n\r\n    // Комплексные запросы\r\n    async getAvailableComputers(date, timeFrom, timeTo) {\r\n        return this.request(`/computers/available?date=${date}&time_from=${timeFrom}&time_to=${timeTo}`);\r\n    }\r\n\r\n    async getUserBookings(userId) {\r\n        return this.request(`/users/${userId}/bookings`);\r\n    }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}