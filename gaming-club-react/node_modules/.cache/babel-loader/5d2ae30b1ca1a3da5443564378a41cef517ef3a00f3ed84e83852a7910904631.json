{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ksenia\\\\Desktop\\\\\\u043A\\u043E\\u043C\\u043F_\\u043A\\u043B\\u0443\\u0431\\\\gaming-club-react\\\\src\\\\components\\\\BookingConfirmation.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { apiService } from '../services/Api';\nimport '../styles/BookingConfirmation.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BookingConfirmation = () => {\n  _s();\n  const [bookingData, setBookingData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [processingPayment, setProcessingPayment] = useState(false);\n  const [promoCode, setPromoCode] = useState('');\n  const [appliedPromoCode, setAppliedPromoCode] = useState(null);\n  const [tariffData, setTariffData] = useState(null);\n  const [computers, setComputers] = useState([]);\n  const [foods, setFoods] = useState([]);\n  const [clubs, setClubs] = useState([]);\n\n  // Загружаем данные из localStorage при монтировании\n  useEffect(() => {\n    const loadBookingData = () => {\n      try {\n        const savedData = localStorage.getItem('lastBooking');\n        console.log('📦 Loading booking data from localStorage:', savedData);\n        if (savedData) {\n          const parsedData = JSON.parse(savedData);\n          setBookingData(parsedData);\n          console.log('✅ Booking data loaded successfully');\n        } else {\n          console.warn('❌ No booking data found in localStorage');\n        }\n      } catch (error) {\n        console.error('❌ Error loading booking data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadBookingData();\n  }, []);\n\n  // Загружаем дополнительные данные с API\n  useEffect(() => {\n    const loadAdditionalData = async () => {\n      if (!bookingData) return;\n      try {\n        console.log('🔄 Loading additional data from API...');\n\n        // Загружаем все данные параллельно\n        const [foodsData, computersData, clubsData] = await Promise.all([apiService.getFoods().catch(error => {\n          console.error('❌ Error loading foods:', error);\n          return [];\n        }), apiService.getComputers().catch(error => {\n          console.error('❌ Error loading computers:', error);\n          return [];\n        }), apiService.getClubs().catch(error => {\n          console.error('❌ Error loading clubs:', error);\n          return [];\n        })]);\n        console.log('📊 API Data loaded:', {\n          foods: foodsData.length,\n          computers: computersData.length,\n          clubs: clubsData.length\n        });\n        setFoods(foodsData);\n        setComputers(computersData);\n        setClubs(clubsData);\n\n        // Пробуем загрузить тариф\n        try {\n          // Пробуем разные варианты endpoint'ов для тарифа\n          let tariff;\n          try {\n            tariff = await apiService.getTariff(1);\n          } catch (e) {\n            console.log('⚠️ Trying alternative tariff endpoint...');\n            tariff = await apiService.request('/tariffs/1');\n          }\n          console.log('💰 Tariff data loaded:', tariff);\n          setTariffData(tariff);\n        } catch (tariffError) {\n          console.error('❌ Error loading tariff:', tariffError);\n          // Используем дефолтный коэффициент\n          setTariffData({\n            coefficient: 1\n          });\n        }\n      } catch (error) {\n        console.error('❌ Error loading additional data:', error);\n      }\n    };\n    loadAdditionalData();\n  }, [bookingData]);\n\n  // Используем данные из состояния\n  const data = bookingData || {};\n  const {\n    formData = {},\n    selectedPlace,\n    placeRate,\n    cartItems = [],\n    totalPrice = 0,\n    calculatedData = {}\n  } = data;\n\n  // Деструктурируем formData с значениями по умолчанию\n  const {\n    place = '',\n    dateFrom = '',\n    timeFrom = '',\n    dateTo = '',\n    timeTo = '',\n    address = '',\n    computer_id = '',\n    club_id = ''\n  } = formData;\n\n  // Функция для получения информации о компьютере\n  const getComputerInfo = computerId => {\n    if (!computerId) return null;\n    const computer = computers.find(c => c.id == computerId);\n    if (!computer) {\n      console.log(`❌ Computer not found for ID: ${computerId}`);\n      console.log('Available computers:', computers.map(c => ({\n        id: c.id,\n        name: c.name\n      })));\n      return null;\n    }\n    return {\n      id: computer.id,\n      name: computer.name || `Компьютер ${computer.id}`,\n      price: computer.price,\n      processor: computer.processor,\n      graphicsCard: computer.graphics_card,\n      ram: computer.ram,\n      monitor: computer.monitor,\n      headphones: computer.headphones,\n      keyboard: computer.keyboard,\n      mouse: computer.mouse\n    };\n  };\n\n  // Функция для получения информации о клубе\n  const getClubInfo = clubId => {\n    if (!clubId) return {\n      address: 'Не указан',\n      name: 'Неизвестный клуб'\n    };\n    const club = clubs.find(c => c.id == clubId);\n    if (!club) {\n      console.log(`❌ Club not found for ID: ${clubId}`);\n      return {\n        address: `Клуб #${clubId}`,\n        name: 'Неизвестный клуб'\n      };\n    }\n    return club;\n  };\n\n  // Функция для получения информации о еде\n  const getFoodInfo = foodId => {\n    const food = foods.find(f => f.id == foodId);\n    if (!food) {\n      console.log(`❌ Food not found for ID: ${foodId}`);\n      return {\n        name: `Продукт #${foodId}`,\n        price: 0\n      };\n    }\n    return food;\n  };\n\n  // Функция для получения информации о месте\n  const getPlaceInfo = placeNumber => {\n    const placeInfo = {\n      1: {\n        type: \"Gaming PC\"\n      },\n      2: {\n        type: \"Gaming PC\"\n      },\n      3: {\n        type: \"Gaming PC\"\n      },\n      4: {\n        type: \"Gaming PC\"\n      },\n      5: {\n        type: \"Streaming PC\"\n      },\n      6: {\n        type: \"Competitive PC\"\n      },\n      8: {\n        type: \"PlayStation 5\"\n      },\n      9: {\n        type: \"PlayStation 5 Pro\"\n      },\n      10: {\n        type: \"VR Station\"\n      },\n      11: {\n        type: \"Audio Station\"\n      },\n      12: {\n        type: \"PlayStation 4 Pro\"\n      },\n      13: {\n        type: \"Nintendo Switch\"\n      },\n      14: {\n        type: \"Premium Audio\"\n      }\n    };\n    return placeInfo[placeNumber] || {\n      type: \"Стандартное место\"\n    };\n  };\n  const placeInfo = getPlaceInfo(selectedPlace);\n  const actualPlaceRate = placeRate;\n  const computerInfo = getComputerInfo(computer_id);\n  const clubInfo = getClubInfo(club_id);\n\n  // Показываем загрузку пока данные не готовы\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-confirmation\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-state\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Если данных нет, показываем сообщение об ошибке\n  if (!bookingData || !selectedPlace) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-confirmation\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-booking-data\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0435\\u0440\\u043D\\u0438\\u0442\\u0435\\u0441\\u044C \\u0438 \\u0441\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0437\\u0430\\u043D\\u043E\\u0432\\u043E.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn primary\",\n            onClick: () => window.location.href = '/booking',\n            children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043A \\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn secondary\",\n            onClick: () => window.location.href = '/',\n            style: {\n              marginLeft: '10px'\n            },\n            children: \"\\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Форматирование даты для отображения\n  const formatDateDisplay = dateString => {\n    if (!dateString) return '';\n    const [year, month, day] = dateString.split('-').map(Number);\n    const date = new Date(year, month - 1, day);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const tomorrow = new Date(today);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    if (date.toDateString() === today.toDateString()) {\n      return 'Сегодня';\n    } else if (date.toDateString() === tomorrow.toDateString()) {\n      return 'Завтра';\n    } else {\n      return date.toLocaleDateString('ru-RU', {\n        day: 'numeric',\n        month: 'long',\n        weekday: 'short'\n      });\n    }\n  };\n\n  // Расчет количества часов\n  const getBookingHours = () => {\n    if (!dateFrom || !timeFrom || !dateTo || !timeTo) return 0;\n    try {\n      const startDateTime = new Date(`${dateFrom}T${timeFrom}`);\n      const endDateTime = new Date(`${dateTo}T${timeTo}`);\n      const hoursDiff = (endDateTime - startDateTime) / (1000 * 60 * 60);\n      return Math.round(hoursDiff * 10) / 10;\n    } catch (error) {\n      console.error('Error calculating booking hours:', error);\n      return 0;\n    }\n  };\n\n  // Расчет стоимости без скидки\n  const calculateBaseCost = () => {\n    if (calculatedData && calculatedData.totalCost) {\n      return calculatedData.totalCost;\n    }\n    if (!dateFrom || !timeFrom || !dateTo || !timeTo) return 0;\n    try {\n      const startDateTime = new Date(`${dateFrom}T${timeFrom}`);\n      const endDateTime = new Date(`${dateTo}T${timeTo}`);\n      const hours = (endDateTime - startDateTime) / (1000 * 60 * 60);\n      const placeCost = Math.round(hours * actualPlaceRate);\n      return placeCost + totalPrice;\n    } catch (error) {\n      console.error('Error calculating booking cost:', error);\n      return totalPrice;\n    }\n  };\n\n  // Расчет скидки по коэффициенту тарифа\n  const calculateDiscount = baseCost => {\n    if (!appliedPromoCode) return {\n      percent: 0,\n      amount: 0\n    };\n\n    // Если тариф не загружен, используем дефолтный коэффициент\n    const coefficient = (tariffData === null || tariffData === void 0 ? void 0 : tariffData.coefficient) || appliedPromoCode.coefficient || 0.9;\n    const discountPercent = Math.round((1 - coefficient) * 100);\n    const discountAmount = baseCost * (1 - coefficient);\n    return {\n      percent: discountPercent,\n      amount: Math.round(discountAmount)\n    };\n  };\n\n  // Расчет итоговой стоимости со скидкой\n  const calculateFinalCost = () => {\n    const baseCost = calculateBaseCost();\n    if (!appliedPromoCode) {\n      return baseCost;\n    }\n    const discount = calculateDiscount(baseCost);\n    return baseCost - discount.amount;\n  };\n  const bookingHours = getBookingHours();\n  const baseCost = calculateBaseCost();\n  const finalCost = calculateFinalCost();\n  const discount = calculateDiscount(baseCost);\n  const placeCost = (calculatedData === null || calculatedData === void 0 ? void 0 : calculatedData.placeCost) || Math.round(bookingHours * actualPlaceRate);\n\n  // Функция применения промокода\n  const applyPromoCode = async () => {\n    if (!promoCode.trim()) {\n      alert('Введите промокод');\n      return;\n    }\n    try {\n      console.log('🔍 Applying promo code:', promoCode);\n\n      // Пробуем найти промокод в API\n      let promoData;\n      try {\n        const promoCodes = await apiService.getPromoCodes();\n        promoData = promoCodes.find(p => p.code === promoCode);\n        console.log('🔍 Found promo code in API:', promoData);\n      } catch (apiError) {\n        console.log('⚠️ Cannot load promocodes from API, using default');\n      }\n      if (promoData) {\n        // Используем данные из API\n        setAppliedPromoCode({\n          id: promoData.id,\n          code: promoData.code,\n          discount: promoData.discount_percent || 10,\n          discount_type: 'percent',\n          coefficient: promoData.coefficient || 0.9\n        });\n      } else {\n        // Используем дефолтный коэффициент\n        const coefficient = 0.9; // 10% скидка для теста\n        const discountPercent = Math.round((1 - coefficient) * 100);\n        setAppliedPromoCode({\n          id: 1,\n          code: promoCode,\n          discount: discountPercent,\n          discount_type: 'percent',\n          coefficient: coefficient\n        });\n      }\n      alert(`Промокод \"${promoCode}\" применен! Скидка: ${(appliedPromoCode === null || appliedPromoCode === void 0 ? void 0 : appliedPromoCode.discount) || 10}%`);\n    } catch (error) {\n      console.error('Promo code error:', error);\n      alert('Ошибка при применении промокода');\n    }\n  };\n  const handleEditBooking = () => {\n    window.location.href = '/booking';\n  };\n  const handleBackToHome = () => {\n    window.location.href = '/';\n  };\n\n  // Функция создания бронирования с оплатой\n  const handlePayment = async () => {\n    try {\n      setProcessingPayment(true);\n      console.log('🔄 Creating booking in database...');\n      const bookingMinutes = getBookingHours() * 60;\n      const placeCostValue = Math.round(bookingMinutes / 60 * actualPlaceRate);\n      const totalCostValue = finalCost;\n\n      // Всегда передаем code_id\n      const bookingDataToSend = {\n        computer_id: parseInt(computer_id) || 1,\n        user_id: 1,\n        club_id: parseInt(club_id) || 1,\n        tariff_id: 1,\n        code_id: appliedPromoCode ? appliedPromoCode.id : 1,\n        start_time: `${dateFrom} ${timeFrom}:00`,\n        end_time: `${dateTo} ${timeTo}:00`,\n        minutes: bookingMinutes,\n        price_for_pc: placeCostValue,\n        price_for_additions: totalPrice,\n        total_price: totalCostValue,\n        status: 'pending'\n      };\n      console.log('📤 Sending booking to API:', bookingDataToSend);\n      const bookingResponse = await apiService.createBooking(bookingDataToSend);\n      console.log('✅ Booking created:', bookingResponse);\n\n      // Затем создаем платеж\n      console.log('🔄 Creating payment...');\n      const paymentData = {\n        user_id: 1,\n        booking_id: bookingResponse.id,\n        price: totalCostValue,\n        payment_type: 'card',\n        status: 'pending',\n        payment_hash: `pay_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        payment_date: new Date().toISOString().split('T')[0]\n      };\n      console.log('📤 Sending payment to API:', paymentData);\n      const paymentResponse = await apiService.createPayment(paymentData);\n      console.log('✅ Payment created:', paymentResponse);\n\n      // Если есть товары в корзине, добавляем их в additional_menu\n      if (cartItems.length > 0) {\n        console.log('🔄 Adding food items to booking...');\n        for (const item of cartItems) {\n          try {\n            await apiService.addFoodToBooking(bookingResponse.id, {\n              food_id: item.id,\n              count: item.quantity\n            });\n            console.log(`✅ Added ${item.name} to booking`);\n          } catch (foodError) {\n            console.error('Error adding food to booking:', foodError);\n          }\n        }\n      }\n\n      // Обновляем данные в localStorage с реальным ID брони\n      const updatedBookingData = {\n        ...bookingData,\n        id: bookingResponse.id,\n        payment_id: paymentResponse.id,\n        status: 'pending_payment'\n      };\n      localStorage.setItem('lastBooking', JSON.stringify(updatedBookingData));\n      alert('Платеж обработан успешно! Бронирование подтверждено.');\n      localStorage.removeItem('lastBooking');\n      window.location.href = '/';\n    } catch (error) {\n      console.error('Payment error:', error);\n      alert('Ошибка при обработке платежа. Пожалуйста, попробуйте еще раз.');\n    } finally {\n      setProcessingPayment(false);\n    }\n  };\n\n  // Функция создания бронирования без оплаты\n  const handleSimplePayment = async () => {\n    try {\n      setProcessingPayment(true);\n      console.log('🔄 Creating booking without payment...');\n      const bookingMinutes = getBookingHours() * 60;\n      const placeCostValue = Math.round(bookingMinutes / 60 * actualPlaceRate);\n      const totalCostValue = finalCost;\n\n      // Всегда передаем code_id\n      const bookingDataToSend = {\n        computer_id: parseInt(computer_id) || 1,\n        user_id: 1,\n        club_id: parseInt(club_id) || 1,\n        tariff_id: 1,\n        code_id: appliedPromoCode ? appliedPromoCode.id : 1,\n        start_time: `${dateFrom} ${timeFrom}:00`,\n        end_time: `${dateTo} ${timeTo}:00`,\n        minutes: bookingMinutes,\n        price_for_pc: placeCostValue,\n        price_for_additions: totalPrice,\n        total_price: totalCostValue,\n        status: 'confirmed'\n      };\n      console.log('📤 Sending booking to API:', bookingDataToSend);\n      const bookingResponse = await apiService.createBooking(bookingDataToSend);\n      console.log('✅ Booking created:', bookingResponse);\n\n      // Если есть товары в корзине, добавляем их в additional_menu\n      // Если есть товары в корзине, добавляем их в additional_menu\n      if (cartItems.length > 0) {\n        console.log('🔄 Adding food items to booking...');\n        let foodErrors = [];\n        for (const item of cartItems) {\n          try {\n            console.log(`📤 Adding food item:`, {\n              booking_id: bookingResponse.id,\n              food_id: item.id,\n              count: item.quantity\n            });\n            const foodResponse = await apiService.addFoodToBooking(bookingResponse.id, {\n              food_id: item.id,\n              count: item.quantity\n            });\n            console.log(`✅ Added ${item.name} to booking:`, foodResponse);\n          } catch (foodError) {\n            console.error(`❌ Error adding ${item.name} to booking:`, foodError);\n            foodErrors.push({\n              item: item.name,\n              error: foodError.message\n            });\n          }\n        }\n        if (foodErrors.length > 0) {\n          console.warn('⚠️ Some food items failed to add:', foodErrors);\n          // Можно показать предупреждение пользователю\n          alert(`Бронирование создано, но возникли проблемы с добавлением некоторых позиций из меню. Обратитесь к администратору.`);\n        }\n      }\n      localStorage.removeItem('lastBooking');\n      window.location.href = '/';\n    } catch (error) {\n      console.error('Booking creation error:', error);\n      alert('Ошибка при создании бронирования. Пожалуйста, попробуйте еще раз.');\n    } finally {\n      setProcessingPayment(false);\n    }\n  };\n\n  // Отображение информации о примененном промокоде\n  const renderPromoCodeInfo = () => {\n    if (!appliedPromoCode) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"promo-code-applied\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u2705 \\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0435\\u043D \\u043F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434: \", appliedPromoCode.code]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 9\n      }, this), appliedPromoCode.discount && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\" (\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430: \", appliedPromoCode.discount, \"%)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Отладочная информация\n  console.log('🔍 Current state:', {\n    bookingData: !!bookingData,\n    foodsCount: foods.length,\n    computersCount: computers.length,\n    clubsCount: clubs.length,\n    tariffData: !!tariffData,\n    computerInfo: !!computerInfo,\n    clubInfo: !!clubInfo\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"booking-confirmation\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"background-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/images/67f504fdfc00ad2f7d384258d27391b08ef7aabd.png\",\n        alt: \"Abstract background\",\n        className: \"bg-image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-overlay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"confirmation-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 \\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"confirmation-subtitle\",\n          children: \"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u044C\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043F\\u0435\\u0440\\u0435\\u0434 \\u043E\\u043F\\u043B\\u0430\\u0442\\u043E\\u0439\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"confirmation-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"booking-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043E \\u0431\\u0440\\u043E\\u043D\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"\\u041C\\u0435\\u0441\\u0442\\u043E:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: [\"\\u041C\\u0435\\u0441\\u0442\\u043E \\u2116\", place, \" (\", placeInfo.type, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 607,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 17\n              }, this), computerInfo && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"info-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"info-label\",\n                    children: \"\\u041A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 613,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"info-value\",\n                    children: computerInfo.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 614,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 612,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"info-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"info-label\",\n                    children: \"\\u041F\\u0440\\u043E\\u0446\\u0435\\u0441\\u0441\\u043E\\u0440:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 617,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"info-value\",\n                    children: computerInfo.processor || 'Не указан'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 618,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"info-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"info-label\",\n                    children: \"\\u0412\\u0438\\u0434\\u0435\\u043E\\u043A\\u0430\\u0440\\u0442\\u0430:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 621,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"info-value\",\n                    children: computerInfo.graphicsCard || 'Не указана'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 622,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"\\u0422\\u0430\\u0440\\u0438\\u0444:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 628,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: [actualPlaceRate, \" \\u20BD/\\u0447\\u0430\\u0441\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 629,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"\\u041A\\u043B\\u0443\\u0431:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 633,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: clubInfo.address || address\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 634,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u043E:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: [formatDateDisplay(dateFrom), \" \", timeFrom]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 639,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"\\u041E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u0435:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 645,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: [formatDateDisplay(dateTo), \" \", timeTo]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-label\",\n                  children: \"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"info-value\",\n                  children: bookingHours > 0 ? `${bookingHours} часов` : 'Не указано'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 651,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u041F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"promo-code-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434\",\n                value: promoCode,\n                onChange: e => setPromoCode(e.target.value),\n                className: \"promo-code-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: applyPromoCode,\n                className: \"btn secondary\",\n                children: \"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 15\n            }, this), renderPromoCodeInfo()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 13\n          }, this), cartItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [\"\\u0417\\u0430\\u043A\\u0430\\u0437 \\u0438\\u0437 \\u043A\\u0430\\u0444\\u0435 (\", cartItems.length, \" \\u043F\\u043E\\u0437\\u0438\\u0446\\u0438\\u0439)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-items-list\",\n              children: cartItems.map(item => {\n                const foodInfo = getFoodInfo(item.id);\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cart-item-confirm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"item-name\",\n                    children: foodInfo.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 689,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"item-quantity\",\n                    children: [\"x\", item.quantity]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 690,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"item-price\",\n                    children: [foodInfo.price * item.quantity, \" \\u20BD\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 691,\n                    columnNumber: 25\n                  }, this)]\n                }, item.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 688,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C \\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cost-breakdown\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cost-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u0410\\u0440\\u0435\\u043D\\u0434\\u0430 \\u043C\\u0435\\u0441\\u0442\\u0430 (\", bookingHours, \" \\u0447\\u0430\\u0441\\u043E\\u0432 \\xD7 \", actualPlaceRate, \" \\u20BD/\\u0447\\u0430\\u0441):\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 706,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [placeCost, \" \\u20BD\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 707,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 705,\n                columnNumber: 17\n              }, this), cartItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cost-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u0417\\u0430\\u043A\\u0430\\u0437 \\u0438\\u0437 \\u043A\\u0430\\u0444\\u0435:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 712,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [totalPrice, \" \\u20BD\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 713,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 711,\n                columnNumber: 19\n              }, this), appliedPromoCode && discount.amount > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cost-item discount\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430 \\u043F\\u043E \\u043F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434\\u0443 (\", appliedPromoCode.discount, \"%):\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 720,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"-\", discount.amount, \" \\u20BD\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 721,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 719,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cost-item original-price\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"\\u0418\\u0437\\u043D\\u0430\\u0447\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 724,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"strikethrough\",\n                    children: [baseCost, \" \\u20BD\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 725,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cost-total\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u0418\\u0442\\u043E\\u0433\\u043E \\u043A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0435:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 731,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"total-amount\",\n                  children: [finalCost, \" \\u20BD\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 732,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 730,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 704,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn payment-btn primary\",\n                onClick: handlePayment,\n                disabled: processingPayment,\n                children: processingPayment ? 'Обработка...' : `Перейти к оплате ${finalCost} ₽`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 737,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn secondary\",\n                onClick: handleSimplePayment,\n                disabled: processingPayment,\n                style: {\n                  marginTop: '10px'\n                },\n                children: processingPayment ? 'Создание...' : 'Создать бронь без оплаты (тест)'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 745,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn secondary\",\n                onClick: handleEditBooking,\n                disabled: processingPayment,\n                children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0431\\u0440\\u043E\\u043D\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn secondary\",\n                onClick: handleBackToHome,\n                disabled: processingPayment,\n                children: \"\\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 761,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-security\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"security-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"security-icon\",\n                  children: \"\\uD83D\\uDD12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 772,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u0411\\u0435\\u0437\\u043E\\u043F\\u0430\\u0441\\u043D\\u0430\\u044F \\u043E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u0447\\u0435\\u0440\\u0435\\u0437 CloudPayments\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 773,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 771,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"security-note\",\n                children: \"\\u041F\\u043E\\u0441\\u043B\\u0435 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B \\u0432\\u044B \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 email \\u0438 \\u0441\\u043C\\u0441\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 775,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"support-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"\\u041D\\u0443\\u0436\\u043D\\u0430 \\u043F\\u043E\\u043C\\u043E\\u0449\\u044C?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 782,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0438: +7 (999) 123-45-67\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 783,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Email: support@cyberclub.ru\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 784,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 781,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-info\",\n        style: {\n          background: 'rgba(255,255,255,0.1)',\n          padding: '15px',\n          borderRadius: '8px',\n          marginTop: '20px',\n          color: 'white',\n          fontSize: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\uD83D\\uDD27 \\u041E\\u0442\\u043B\\u0430\\u0434\\u043E\\u0447\\u043D\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 53\n        }, this), \"- \\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0438\\u0437 localStorage: \", bookingData ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 799,\n          columnNumber: 62\n        }, this), \"- \\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E \\u0431\\u043B\\u044E\\u0434: \", foods.length, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 43\n        }, this), \"- \\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440\\u043E\\u0432: \", computers.length, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 54\n        }, this), \"- \\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E \\u043A\\u043B\\u0443\\u0431\\u043E\\u0432: \", clubs.length, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 802,\n          columnNumber: 45\n        }, this), \"- \\u0422\\u0430\\u0440\\u0438\\u0444: \", tariffData ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 803,\n          columnNumber: 44\n        }, this), \"- \\u0418\\u043D\\u0444\\u043E \\u043E \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440\\u0435: \", computerInfo ? '✅' : '❌', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 804,\n          columnNumber: 58\n        }, this), \"- \\u0418\\u043D\\u0444\\u043E \\u043E \\u043A\\u043B\\u0443\\u0431\\u0435: \", clubInfo ? '✅' : '❌']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 790,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 587,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingConfirmation, \"5I8HfGokytcXEARPizbUCI9spCY=\");\n_c = BookingConfirmation;\nexport default BookingConfirmation;\nvar _c;\n$RefreshReg$(_c, \"BookingConfirmation\");","map":{"version":3,"names":["React","useState","useEffect","apiService","jsxDEV","_jsxDEV","Fragment","_Fragment","BookingConfirmation","_s","bookingData","setBookingData","loading","setLoading","processingPayment","setProcessingPayment","promoCode","setPromoCode","appliedPromoCode","setAppliedPromoCode","tariffData","setTariffData","computers","setComputers","foods","setFoods","clubs","setClubs","loadBookingData","savedData","localStorage","getItem","console","log","parsedData","JSON","parse","warn","error","loadAdditionalData","foodsData","computersData","clubsData","Promise","all","getFoods","catch","getComputers","getClubs","length","tariff","getTariff","e","request","tariffError","coefficient","data","formData","selectedPlace","placeRate","cartItems","totalPrice","calculatedData","place","dateFrom","timeFrom","dateTo","timeTo","address","computer_id","club_id","getComputerInfo","computerId","computer","find","c","id","map","name","price","processor","graphicsCard","graphics_card","ram","monitor","headphones","keyboard","mouse","getClubInfo","clubId","club","getFoodInfo","foodId","food","f","getPlaceInfo","placeNumber","placeInfo","type","actualPlaceRate","computerInfo","clubInfo","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","href","style","marginLeft","formatDateDisplay","dateString","year","month","day","split","Number","date","Date","today","setHours","tomorrow","setDate","getDate","toDateString","toLocaleDateString","weekday","getBookingHours","startDateTime","endDateTime","hoursDiff","Math","round","calculateBaseCost","totalCost","hours","placeCost","calculateDiscount","baseCost","percent","amount","discountPercent","discountAmount","calculateFinalCost","discount","bookingHours","finalCost","applyPromoCode","trim","alert","promoData","promoCodes","getPromoCodes","p","code","apiError","discount_percent","discount_type","handleEditBooking","handleBackToHome","handlePayment","bookingMinutes","placeCostValue","totalCostValue","bookingDataToSend","parseInt","user_id","tariff_id","code_id","start_time","end_time","minutes","price_for_pc","price_for_additions","total_price","status","bookingResponse","createBooking","paymentData","booking_id","payment_type","payment_hash","now","random","toString","substr","payment_date","toISOString","paymentResponse","createPayment","item","addFoodToBooking","food_id","count","quantity","foodError","updatedBookingData","payment_id","setItem","stringify","removeItem","handleSimplePayment","foodErrors","foodResponse","push","message","renderPromoCodeInfo","foodsCount","computersCount","clubsCount","src","alt","placeholder","value","onChange","target","foodInfo","disabled","marginTop","background","padding","borderRadius","color","fontSize","_c","$RefreshReg$"],"sources":["C:/Users/Ksenia/Desktop/комп_клуб/gaming-club-react/src/components/BookingConfirmation.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/Api';\r\nimport '../styles/BookingConfirmation.css';\r\n\r\nconst BookingConfirmation = () => {\r\n  const [bookingData, setBookingData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [processingPayment, setProcessingPayment] = useState(false);\r\n  const [promoCode, setPromoCode] = useState('');\r\n  const [appliedPromoCode, setAppliedPromoCode] = useState(null);\r\n  const [tariffData, setTariffData] = useState(null);\r\n  const [computers, setComputers] = useState([]);\r\n  const [foods, setFoods] = useState([]);\r\n  const [clubs, setClubs] = useState([]);\r\n\r\n  // Загружаем данные из localStorage при монтировании\r\n  useEffect(() => {\r\n    const loadBookingData = () => {\r\n      try {\r\n        const savedData = localStorage.getItem('lastBooking');\r\n        console.log('📦 Loading booking data from localStorage:', savedData);\r\n        \r\n        if (savedData) {\r\n          const parsedData = JSON.parse(savedData);\r\n          setBookingData(parsedData);\r\n          console.log('✅ Booking data loaded successfully');\r\n        } else {\r\n          console.warn('❌ No booking data found in localStorage');\r\n        }\r\n      } catch (error) {\r\n        console.error('❌ Error loading booking data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadBookingData();\r\n  }, []);\r\n\r\n  // Загружаем дополнительные данные с API\r\n  useEffect(() => {\r\n    const loadAdditionalData = async () => {\r\n      if (!bookingData) return;\r\n      \r\n      try {\r\n        console.log('🔄 Loading additional data from API...');\r\n        \r\n        // Загружаем все данные параллельно\r\n        const [foodsData, computersData, clubsData] = await Promise.all([\r\n          apiService.getFoods().catch(error => {\r\n            console.error('❌ Error loading foods:', error);\r\n            return [];\r\n          }),\r\n          apiService.getComputers().catch(error => {\r\n            console.error('❌ Error loading computers:', error);\r\n            return [];\r\n          }),\r\n          apiService.getClubs().catch(error => {\r\n            console.error('❌ Error loading clubs:', error);\r\n            return [];\r\n          })\r\n        ]);\r\n        \r\n        console.log('📊 API Data loaded:', {\r\n          foods: foodsData.length,\r\n          computers: computersData.length,\r\n          clubs: clubsData.length\r\n        });\r\n        \r\n        setFoods(foodsData);\r\n        setComputers(computersData);\r\n        setClubs(clubsData);\r\n        \r\n        // Пробуем загрузить тариф\r\n        try {\r\n          // Пробуем разные варианты endpoint'ов для тарифа\r\n          let tariff;\r\n          try {\r\n            tariff = await apiService.getTariff(1);\r\n          } catch (e) {\r\n            console.log('⚠️ Trying alternative tariff endpoint...');\r\n            tariff = await apiService.request('/tariffs/1');\r\n          }\r\n          console.log('💰 Tariff data loaded:', tariff);\r\n          setTariffData(tariff);\r\n        } catch (tariffError) {\r\n          console.error('❌ Error loading tariff:', tariffError);\r\n          // Используем дефолтный коэффициент\r\n          setTariffData({ coefficient: 1 });\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('❌ Error loading additional data:', error);\r\n      }\r\n    };\r\n\r\n    loadAdditionalData();\r\n  }, [bookingData]);\r\n\r\n  // Используем данные из состояния\r\n  const data = bookingData || {};\r\n\r\n  const {\r\n    formData = {},\r\n    selectedPlace,\r\n    placeRate,\r\n    cartItems = [],\r\n    totalPrice = 0,\r\n    calculatedData = {}\r\n  } = data;\r\n\r\n  // Деструктурируем formData с значениями по умолчанию\r\n  const {\r\n    place = '',\r\n    dateFrom = '',\r\n    timeFrom = '',\r\n    dateTo = '',\r\n    timeTo = '',\r\n    address = '',\r\n    computer_id = '',\r\n    club_id = ''\r\n  } = formData;\r\n\r\n  // Функция для получения информации о компьютере\r\n  const getComputerInfo = (computerId) => {\r\n    if (!computerId) return null;\r\n    \r\n    const computer = computers.find(c => c.id == computerId);\r\n    if (!computer) {\r\n      console.log(`❌ Computer not found for ID: ${computerId}`);\r\n      console.log('Available computers:', computers.map(c => ({ id: c.id, name: c.name })));\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      id: computer.id,\r\n      name: computer.name || `Компьютер ${computer.id}`,\r\n      price: computer.price,\r\n      processor: computer.processor,\r\n      graphicsCard: computer.graphics_card,\r\n      ram: computer.ram,\r\n      monitor: computer.monitor,\r\n      headphones: computer.headphones,\r\n      keyboard: computer.keyboard,\r\n      mouse: computer.mouse\r\n    };\r\n  };\r\n\r\n  // Функция для получения информации о клубе\r\n  const getClubInfo = (clubId) => {\r\n    if (!clubId) return { address: 'Не указан', name: 'Неизвестный клуб' };\r\n    \r\n    const club = clubs.find(c => c.id == clubId);\r\n    if (!club) {\r\n      console.log(`❌ Club not found for ID: ${clubId}`);\r\n      return { address: `Клуб #${clubId}`, name: 'Неизвестный клуб' };\r\n    }\r\n\r\n    return club;\r\n  };\r\n\r\n  // Функция для получения информации о еде\r\n  const getFoodInfo = (foodId) => {\r\n    const food = foods.find(f => f.id == foodId);\r\n    if (!food) {\r\n      console.log(`❌ Food not found for ID: ${foodId}`);\r\n      return { name: `Продукт #${foodId}`, price: 0 };\r\n    }\r\n    return food;\r\n  };\r\n\r\n  // Функция для получения информации о месте\r\n  const getPlaceInfo = (placeNumber) => {\r\n    const placeInfo = {\r\n      1: { type: \"Gaming PC\" },\r\n      2: { type: \"Gaming PC\" },\r\n      3: { type: \"Gaming PC\" },\r\n      4: { type: \"Gaming PC\" },\r\n      5: { type: \"Streaming PC\" },\r\n      6: { type: \"Competitive PC\" },\r\n      8: { type: \"PlayStation 5\" },\r\n      9: { type: \"PlayStation 5 Pro\" },\r\n      10: { type: \"VR Station\" },\r\n      11: { type: \"Audio Station\" },\r\n      12: { type: \"PlayStation 4 Pro\" },\r\n      13: { type: \"Nintendo Switch\" },\r\n      14: { type: \"Premium Audio\" }\r\n    };\r\n    return placeInfo[placeNumber] || { type: \"Стандартное место\" };\r\n  };\r\n\r\n  const placeInfo = getPlaceInfo(selectedPlace);\r\n  const actualPlaceRate = placeRate;\r\n  const computerInfo = getComputerInfo(computer_id);\r\n  const clubInfo = getClubInfo(club_id);\r\n\r\n  // Показываем загрузку пока данные не готовы\r\n  if (loading) {\r\n    return (\r\n      <div className=\"booking-confirmation\">\r\n        <div className=\"container\">\r\n          <div className=\"loading-state\">\r\n            <h2>Загрузка данных бронирования...</h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Если данных нет, показываем сообщение об ошибке\r\n  if (!bookingData || !selectedPlace) {\r\n    return (\r\n      <div className=\"booking-confirmation\">\r\n        <div className=\"container\">\r\n          <div className=\"no-booking-data\">\r\n            <h2>Данные бронирования не найдены</h2>\r\n            <p>Пожалуйста, вернитесь и создайте бронирование заново.</p>\r\n            <button \r\n              className=\"btn primary\"\r\n              onClick={() => window.location.href = '/booking'}\r\n            >\r\n              Вернуться к бронированию\r\n            </button>\r\n            <button \r\n              className=\"btn secondary\"\r\n              onClick={() => window.location.href = '/'}\r\n              style={{marginLeft: '10px'}}\r\n            >\r\n              На главную\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Форматирование даты для отображения\r\n  const formatDateDisplay = (dateString) => {\r\n    if (!dateString) return '';\r\n    const [year, month, day] = dateString.split('-').map(Number);\r\n    const date = new Date(year, month - 1, day);\r\n    \r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    \r\n    const tomorrow = new Date(today);\r\n    tomorrow.setDate(tomorrow.getDate() + 1);\r\n    \r\n    if (date.toDateString() === today.toDateString()) {\r\n      return 'Сегодня';\r\n    } else if (date.toDateString() === tomorrow.toDateString()) {\r\n      return 'Завтра';\r\n    } else {\r\n      return date.toLocaleDateString('ru-RU', {\r\n        day: 'numeric',\r\n        month: 'long',\r\n        weekday: 'short'\r\n      });\r\n    }\r\n  };\r\n\r\n  // Расчет количества часов\r\n  const getBookingHours = () => {\r\n    if (!dateFrom || !timeFrom || !dateTo || !timeTo) return 0;\r\n    \r\n    try {\r\n      const startDateTime = new Date(`${dateFrom}T${timeFrom}`);\r\n      const endDateTime = new Date(`${dateTo}T${timeTo}`);\r\n      const hoursDiff = (endDateTime - startDateTime) / (1000 * 60 * 60);\r\n      \r\n      return Math.round(hoursDiff * 10) / 10;\r\n    } catch (error) {\r\n      console.error('Error calculating booking hours:', error);\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  // Расчет стоимости без скидки\r\n  const calculateBaseCost = () => {\r\n    if (calculatedData && calculatedData.totalCost) {\r\n      return calculatedData.totalCost;\r\n    }\r\n    \r\n    if (!dateFrom || !timeFrom || !dateTo || !timeTo) return 0;\r\n    \r\n    try {\r\n      const startDateTime = new Date(`${dateFrom}T${timeFrom}`);\r\n      const endDateTime = new Date(`${dateTo}T${timeTo}`);\r\n      const hours = (endDateTime - startDateTime) / (1000 * 60 * 60);\r\n      \r\n      const placeCost = Math.round(hours * actualPlaceRate);\r\n      return placeCost + totalPrice;\r\n    } catch (error) {\r\n      console.error('Error calculating booking cost:', error);\r\n      return totalPrice;\r\n    }\r\n  };\r\n\r\n  // Расчет скидки по коэффициенту тарифа\r\n  const calculateDiscount = (baseCost) => {\r\n    if (!appliedPromoCode) return { percent: 0, amount: 0 };\r\n    \r\n    // Если тариф не загружен, используем дефолтный коэффициент\r\n    const coefficient = tariffData?.coefficient || (appliedPromoCode.coefficient || 0.9);\r\n    \r\n    const discountPercent = Math.round((1 - coefficient) * 100);\r\n    const discountAmount = baseCost * (1 - coefficient);\r\n    \r\n    return {\r\n      percent: discountPercent,\r\n      amount: Math.round(discountAmount)\r\n    };\r\n  };\r\n\r\n  // Расчет итоговой стоимости со скидкой\r\n  const calculateFinalCost = () => {\r\n    const baseCost = calculateBaseCost();\r\n    \r\n    if (!appliedPromoCode) {\r\n      return baseCost;\r\n    }\r\n    \r\n    const discount = calculateDiscount(baseCost);\r\n    return baseCost - discount.amount;\r\n  };\r\n\r\n  const bookingHours = getBookingHours();\r\n  const baseCost = calculateBaseCost();\r\n  const finalCost = calculateFinalCost();\r\n  const discount = calculateDiscount(baseCost);\r\n  const placeCost = calculatedData?.placeCost || Math.round(bookingHours * actualPlaceRate);\r\n\r\n  // Функция применения промокода\r\n  const applyPromoCode = async () => {\r\n    if (!promoCode.trim()) {\r\n      alert('Введите промокод');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log('🔍 Applying promo code:', promoCode);\r\n      \r\n      // Пробуем найти промокод в API\r\n      let promoData;\r\n      try {\r\n        const promoCodes = await apiService.getPromoCodes();\r\n        promoData = promoCodes.find(p => p.code === promoCode);\r\n        console.log('🔍 Found promo code in API:', promoData);\r\n      } catch (apiError) {\r\n        console.log('⚠️ Cannot load promocodes from API, using default');\r\n      }\r\n      \r\n      if (promoData) {\r\n        // Используем данные из API\r\n        setAppliedPromoCode({\r\n          id: promoData.id,\r\n          code: promoData.code,\r\n          discount: promoData.discount_percent || 10,\r\n          discount_type: 'percent',\r\n          coefficient: promoData.coefficient || 0.9\r\n        });\r\n      } else {\r\n        // Используем дефолтный коэффициент\r\n        const coefficient = 0.9; // 10% скидка для теста\r\n        const discountPercent = Math.round((1 - coefficient) * 100);\r\n        \r\n        setAppliedPromoCode({\r\n          id: 1,\r\n          code: promoCode,\r\n          discount: discountPercent,\r\n          discount_type: 'percent',\r\n          coefficient: coefficient\r\n        });\r\n      }\r\n      \r\n      alert(`Промокод \"${promoCode}\" применен! Скидка: ${appliedPromoCode?.discount || 10}%`);\r\n      \r\n    } catch (error) {\r\n      console.error('Promo code error:', error);\r\n      alert('Ошибка при применении промокода');\r\n    }\r\n  };\r\n\r\n  const handleEditBooking = () => {\r\n    window.location.href = '/booking';\r\n  };\r\n\r\n  const handleBackToHome = () => {\r\n    window.location.href = '/';\r\n  };\r\n\r\n  // Функция создания бронирования с оплатой\r\n  const handlePayment = async () => {\r\n    try {\r\n      setProcessingPayment(true);\r\n      \r\n      console.log('🔄 Creating booking in database...');\r\n      \r\n      const bookingMinutes = getBookingHours() * 60;\r\n      const placeCostValue = Math.round((bookingMinutes / 60) * actualPlaceRate);\r\n      const totalCostValue = finalCost;\r\n\r\n      // Всегда передаем code_id\r\n      const bookingDataToSend = {\r\n        computer_id: parseInt(computer_id) || 1,\r\n        user_id: 1,\r\n        club_id: parseInt(club_id) || 1,\r\n        tariff_id: 1,\r\n        code_id: appliedPromoCode ? appliedPromoCode.id : 1,\r\n        start_time: `${dateFrom} ${timeFrom}:00`,\r\n        end_time: `${dateTo} ${timeTo}:00`,\r\n        minutes: bookingMinutes,\r\n        price_for_pc: placeCostValue,\r\n        price_for_additions: totalPrice,\r\n        total_price: totalCostValue,\r\n        status: 'pending'\r\n      };\r\n\r\n      console.log('📤 Sending booking to API:', bookingDataToSend);\r\n      \r\n      const bookingResponse = await apiService.createBooking(bookingDataToSend);\r\n      console.log('✅ Booking created:', bookingResponse);\r\n\r\n      // Затем создаем платеж\r\n      console.log('🔄 Creating payment...');\r\n      \r\n      const paymentData = {\r\n        user_id: 1,\r\n        booking_id: bookingResponse.id,\r\n        price: totalCostValue,\r\n        payment_type: 'card',\r\n        status: 'pending',\r\n        payment_hash: `pay_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        payment_date: new Date().toISOString().split('T')[0]\r\n      };\r\n\r\n      console.log('📤 Sending payment to API:', paymentData);\r\n\r\n      const paymentResponse = await apiService.createPayment(paymentData);\r\n      console.log('✅ Payment created:', paymentResponse);\r\n\r\n      // Если есть товары в корзине, добавляем их в additional_menu\r\n      if (cartItems.length > 0) {\r\n        console.log('🔄 Adding food items to booking...');\r\n        for (const item of cartItems) {\r\n          try {\r\n            await apiService.addFoodToBooking(bookingResponse.id, {\r\n              food_id: item.id,\r\n              count: item.quantity\r\n            });\r\n            console.log(`✅ Added ${item.name} to booking`);\r\n          } catch (foodError) {\r\n            console.error('Error adding food to booking:', foodError);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Обновляем данные в localStorage с реальным ID брони\r\n      const updatedBookingData = {\r\n        ...bookingData,\r\n        id: bookingResponse.id,\r\n        payment_id: paymentResponse.id,\r\n        status: 'pending_payment'\r\n      };\r\n\r\n      localStorage.setItem('lastBooking', JSON.stringify(updatedBookingData));\r\n\r\n      alert('Платеж обработан успешно! Бронирование подтверждено.');\r\n      localStorage.removeItem('lastBooking');\r\n      \r\n      window.location.href = '/';\r\n\r\n    } catch (error) {\r\n      console.error('Payment error:', error);\r\n      alert('Ошибка при обработке платежа. Пожалуйста, попробуйте еще раз.');\r\n    } finally {\r\n      setProcessingPayment(false);\r\n    }\r\n  };\r\n\r\n  // Функция создания бронирования без оплаты\r\n  const handleSimplePayment = async () => {\r\n    try {\r\n      setProcessingPayment(true);\r\n      \r\n      console.log('🔄 Creating booking without payment...');\r\n      \r\n      const bookingMinutes = getBookingHours() * 60;\r\n      const placeCostValue = Math.round((bookingMinutes / 60) * actualPlaceRate);\r\n      const totalCostValue = finalCost;\r\n\r\n      // Всегда передаем code_id\r\n      const bookingDataToSend = {\r\n        computer_id: parseInt(computer_id) || 1,\r\n        user_id: 1,\r\n        club_id: parseInt(club_id) || 1,\r\n        tariff_id: 1,\r\n        code_id: appliedPromoCode ? appliedPromoCode.id : 1,\r\n        start_time: `${dateFrom} ${timeFrom}:00`,\r\n        end_time: `${dateTo} ${timeTo}:00`,\r\n        minutes: bookingMinutes,\r\n        price_for_pc: placeCostValue,\r\n        price_for_additions: totalPrice,\r\n        total_price: totalCostValue,\r\n        status: 'confirmed'\r\n      };\r\n\r\n      console.log('📤 Sending booking to API:', bookingDataToSend);\r\n      \r\n      const bookingResponse = await apiService.createBooking(bookingDataToSend);\r\n      console.log('✅ Booking created:', bookingResponse);\r\n\r\n      // Если есть товары в корзине, добавляем их в additional_menu\r\n      // Если есть товары в корзине, добавляем их в additional_menu\r\nif (cartItems.length > 0) {\r\n    console.log('🔄 Adding food items to booking...');\r\n    \r\n    let foodErrors = [];\r\n    \r\n    for (const item of cartItems) {\r\n        try {\r\n            console.log(`📤 Adding food item:`, {\r\n                booking_id: bookingResponse.id,\r\n                food_id: item.id,\r\n                count: item.quantity\r\n            });\r\n            \r\n            const foodResponse = await apiService.addFoodToBooking(bookingResponse.id, {\r\n                food_id: item.id,\r\n                count: item.quantity\r\n            });\r\n            \r\n            console.log(`✅ Added ${item.name} to booking:`, foodResponse);\r\n        } catch (foodError) {\r\n            console.error(`❌ Error adding ${item.name} to booking:`, foodError);\r\n            foodErrors.push({\r\n                item: item.name,\r\n                error: foodError.message\r\n            });\r\n        }\r\n    }\r\n    \r\n    if (foodErrors.length > 0) {\r\n        console.warn('⚠️ Some food items failed to add:', foodErrors);\r\n        // Можно показать предупреждение пользователю\r\n        alert(`Бронирование создано, но возникли проблемы с добавлением некоторых позиций из меню. Обратитесь к администратору.`);\r\n    }\r\n}\r\n      localStorage.removeItem('lastBooking');\r\n      \r\n      window.location.href = '/';\r\n\r\n    } catch (error) {\r\n      console.error('Booking creation error:', error);\r\n      alert('Ошибка при создании бронирования. Пожалуйста, попробуйте еще раз.');\r\n    } finally {\r\n      setProcessingPayment(false);\r\n    }\r\n  };\r\n\r\n  // Отображение информации о примененном промокоде\r\n  const renderPromoCodeInfo = () => {\r\n    if (!appliedPromoCode) return null;\r\n\r\n    return (\r\n      <div className=\"promo-code-applied\">\r\n        <span>✅ Применен промокод: {appliedPromoCode.code}</span>\r\n        {appliedPromoCode.discount && (\r\n          <span> (Скидка: {appliedPromoCode.discount}%)</span>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Отладочная информация\r\n  console.log('🔍 Current state:', {\r\n    bookingData: !!bookingData,\r\n    foodsCount: foods.length,\r\n    computersCount: computers.length,\r\n    clubsCount: clubs.length,\r\n    tariffData: !!tariffData,\r\n    computerInfo: !!computerInfo,\r\n    clubInfo: !!clubInfo\r\n  });\r\n\r\n  return (\r\n    <div className=\"booking-confirmation\">\r\n      <div className=\"background-container\">\r\n        <img src=\"/images/67f504fdfc00ad2f7d384258d27391b08ef7aabd.png\" alt=\"Abstract background\" className=\"bg-image\" />\r\n        <div className=\"bg-overlay\"></div>\r\n      </div>\r\n\r\n      <div className=\"container\">\r\n        <div className=\"confirmation-header\">\r\n          <h1>Подтверждение бронирования</h1>\r\n          <p className=\"confirmation-subtitle\">Проверьте данные перед оплатой</p>\r\n        </div>\r\n\r\n        <div className=\"confirmation-content\">\r\n          <div className=\"booking-info\">\r\n            <div className=\"info-section\">\r\n              <h2>Информация о брони</h2>\r\n              \r\n              <div className=\"info-grid\">\r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Место:</span>\r\n                  <span className=\"info-value\">Место №{place} ({placeInfo.type})</span>\r\n                </div>\r\n                \r\n                {computerInfo && (\r\n                  <>\r\n                    <div className=\"info-item\">\r\n                      <span className=\"info-label\">Компьютер:</span>\r\n                      <span className=\"info-value\">{computerInfo.name}</span>\r\n                    </div>\r\n                    <div className=\"info-item\">\r\n                      <span className=\"info-label\">Процессор:</span>\r\n                      <span className=\"info-value\">{computerInfo.processor || 'Не указан'}</span>\r\n                    </div>\r\n                    <div className=\"info-item\">\r\n                      <span className=\"info-label\">Видеокарта:</span>\r\n                      <span className=\"info-value\">{computerInfo.graphicsCard || 'Не указана'}</span>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Тариф:</span>\r\n                  <span className=\"info-value\">{actualPlaceRate} ₽/час</span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Клуб:</span>\r\n                  <span className=\"info-value\">{clubInfo.address || address}</span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Начало:</span>\r\n                  <span className=\"info-value\">\r\n                    {formatDateDisplay(dateFrom)} {timeFrom}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Окончание:</span>\r\n                  <span className=\"info-value\">\r\n                    {formatDateDisplay(dateTo)} {timeTo}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"info-item\">\r\n                  <span className=\"info-label\">Продолжительность:</span>\r\n                  <span className=\"info-value\">\r\n                    {bookingHours > 0 ? `${bookingHours} часов` : 'Не указано'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Промокод */}\r\n            <div className=\"info-section\">\r\n              <h2>Промокод</h2>\r\n              <div className=\"promo-code-section\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Введите промокод\"\r\n                  value={promoCode}\r\n                  onChange={(e) => setPromoCode(e.target.value)}\r\n                  className=\"promo-code-input\"\r\n                />\r\n                <button \r\n                  onClick={applyPromoCode}\r\n                  className=\"btn secondary\"\r\n                >\r\n                  Применить\r\n                </button>\r\n              </div>\r\n              {renderPromoCodeInfo()}\r\n            </div>\r\n\r\n            {cartItems.length > 0 && (\r\n              <div className=\"info-section\">\r\n                <h2>Заказ из кафе ({cartItems.length} позиций)</h2>\r\n                <div className=\"cart-items-list\">\r\n                  {cartItems.map(item => {\r\n                    const foodInfo = getFoodInfo(item.id);\r\n                    return (\r\n                      <div key={item.id} className=\"cart-item-confirm\">\r\n                        <span className=\"item-name\">{foodInfo.name}</span>\r\n                        <span className=\"item-quantity\">x{item.quantity}</span>\r\n                        <span className=\"item-price\">{foodInfo.price * item.quantity} ₽</span>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"payment-section\">\r\n            <div className=\"payment-card\">\r\n              <h3>Стоимость бронирования</h3>\r\n              \r\n              <div className=\"cost-breakdown\">\r\n                <div className=\"cost-item\">\r\n                  <span>Аренда места ({bookingHours} часов × {actualPlaceRate} ₽/час):</span>\r\n                  <span>{placeCost} ₽</span>\r\n                </div>\r\n                \r\n                {cartItems.length > 0 && (\r\n                  <div className=\"cost-item\">\r\n                    <span>Заказ из кафе:</span>\r\n                    <span>{totalPrice} ₽</span>\r\n                  </div>\r\n                )}\r\n\r\n                {appliedPromoCode && discount.amount > 0 && (\r\n                  <>\r\n                    <div className=\"cost-item discount\">\r\n                      <span>Скидка по промокоду ({appliedPromoCode.discount}%):</span>\r\n                      <span>-{discount.amount} ₽</span>\r\n                    </div>\r\n                    <div className=\"cost-item original-price\">\r\n                      <span>Изначальная стоимость:</span>\r\n                      <span className=\"strikethrough\">{baseCost} ₽</span>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                \r\n                <div className=\"cost-total\">\r\n                  <span>Итого к оплате:</span>\r\n                  <span className=\"total-amount\">{finalCost} ₽</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"payment-actions\">\r\n                <button \r\n                  className=\"btn payment-btn primary\"\r\n                  onClick={handlePayment}\r\n                  disabled={processingPayment}\r\n                >\r\n                  {processingPayment ? 'Обработка...' : `Перейти к оплате ${finalCost} ₽`}\r\n                </button>\r\n                \r\n                <button \r\n                  className=\"btn secondary\"\r\n                  onClick={handleSimplePayment}\r\n                  disabled={processingPayment}\r\n                  style={{marginTop: '10px'}}\r\n                >\r\n                  {processingPayment ? 'Создание...' : 'Создать бронь без оплаты (тест)'}\r\n                </button>\r\n                \r\n                <button \r\n                  className=\"btn secondary\"\r\n                  onClick={handleEditBooking}\r\n                  disabled={processingPayment}\r\n                >\r\n                  Изменить бронь\r\n                </button>\r\n                <button \r\n                  className=\"btn secondary\"\r\n                  onClick={handleBackToHome}\r\n                  disabled={processingPayment}\r\n                >\r\n                  На главную\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"payment-security\">\r\n                <div className=\"security-info\">\r\n                  <span className=\"security-icon\">🔒</span>\r\n                  <span>Безопасная оплата через CloudPayments</span>\r\n                </div>\r\n                <p className=\"security-note\">\r\n                  После оплаты вы получите подтверждение на email и смс\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"support-info\">\r\n              <h4>Нужна помощь?</h4>\r\n              <p>Телефон поддержки: +7 (999) 123-45-67</p>\r\n              <p>Email: support@cyberclub.ru</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Отладочная информация */}\r\n        <div className=\"debug-info\" style={{\r\n          background: 'rgba(255,255,255,0.1)',\r\n          padding: '15px',\r\n          borderRadius: '8px',\r\n          marginTop: '20px',\r\n          color: 'white',\r\n          fontSize: '12px'\r\n        }}>\r\n          <strong>🔧 Отладочная информация:</strong><br/>\r\n          - Данные из localStorage: {bookingData ? '✅' : '❌'}<br/>\r\n          - Загружено блюд: {foods.length}<br/>\r\n          - Загружено компьютеров: {computers.length}<br/>\r\n          - Загружено клубов: {clubs.length}<br/>\r\n          - Тариф: {tariffData ? '✅' : '❌'}<br/>\r\n          - Инфо о компьютере: {computerInfo ? '✅' : '❌'}<br/>\r\n          - Инфо о клубе: {clubInfo ? '✅' : '❌'}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookingConfirmation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}